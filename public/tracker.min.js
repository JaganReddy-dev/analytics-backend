(()=>{const t="http://localhost:4000/collect",e=[25,50,75,100],o=500,n=18e5;let r=(()=>{const t=localStorage.getItem("sessionId"),e=Number(localStorage.getItem("lastActive"));return!t||!e||Date.now()-e>=n?(()=>{const t=crypto.randomUUID();return localStorage.setItem("sessionId",t),localStorage.setItem("lastActive",Date.now().toString()),t})():t})(),a=localStorage.getItem("userId")||(()=>{const t=crypto.randomUUID();return localStorage.setItem("userId",t),t})(),c=!1;const i=new Set;let s=null;const l=(e,o)=>{localStorage.setItem("lastActive",Date.now().toString());const n=`${t}/${e}`,c={...o,sessionId:r,userId:a};navigator.sendBeacon?navigator.sendBeacon(n,new Blob([JSON.stringify(c)],{type:"application/json"})):fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(t=>console.error("Tracking error:",t))},d=(t,e,o={})=>{l("event",{type:t,action:e,website:window.location.href,metadata:o})},g=[{attr:"trackify-navigate",type:"navigation-click"},{attr:"trackify-button",type:"button-click"}],u=t=>{for(const e of g){const o=t.target.closest(`[${e.attr}]`);if(o){const t=o.getAttribute(e.attr);d(e.type,t,{element:e.attr});break}}},w=()=>{window.addEventListener("scroll",((t,e)=>{let o=0;return(...n)=>{const r=Date.now();r-o>=e&&(o=r,t(...n))}})(()=>{const t=(()=>{const t=window.scrollY,e=document.documentElement.scrollHeight-window.innerHeight;return Math.round(t/e*100)})();for(let o of e)t>=o&&!i.has(o)&&(i.add(o),d("scroll-depth","scroll",{depth:o}))},o))};document.addEventListener("DOMContentLoaded",async()=>{c=await(async()=>!(!navigator.brave||!navigator.brave.isBrave)&&await navigator.brave.isBrave())(),document.addEventListener("click",u),w(),(t=>{if(!navigator.geolocation)return void t();navigator.geolocation.getCurrentPosition(e=>{s={lat:e.coords.latitude,lon:e.coords.longitude,accuracy:e.coords.accuracy},t()},()=>{d("location","ip_fallback"),t()})})(()=>{l("pageview",{sessionId:r,userId:a,url:window.location.href}),l("visitor",{url:window.location.href,userAgent:navigator.userAgent,referrer:document.referrer||"direct",screenWidth:window.screen.width,screenHeight:window.screen.height,isBrave:c})})})})();