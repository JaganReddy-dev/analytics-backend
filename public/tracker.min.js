(() => {
  const t = () => ({
      url: window.location.href,
      device: /Mobile|Android|iPhone|iPad/i.test(navigator.userAgent)
        ? "Mobile"
        : "Desktop",
      userAgent: navigator.userAgent,
      referrer: document.referrer,
      screenWidth: window.screen.width,
      screenHeight: window.screen.height,
    }),
    n = (t, n) => {
      const o = `http://localhost:4000/collect/${t}`;
      console.log(o),
        navigator.sendBeacon
          ? navigator.sendBeacon(
              o,
              new Blob([JSON.stringify(n)], { type: "application/json" })
            )
          : fetch(o, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(n),
            }).catch((t) => {
              console.error(e);
            });
    };
  n("visitor", t());
  const o = (e, o, i = {}) => {
    n(e, { type: o, website: window.location.href, ...t(), ...i });
  };
  o("event", "pageview"),
    document.addEventListener("click", (e) => {
      o("event", "click", {
        tag: e.target.tagName,
        id: e.target.id,
        classes: e.target.className,
      });
    });
})();
